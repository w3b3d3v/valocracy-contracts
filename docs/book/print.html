<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html">Home</a></li><li class="chapter-item "><a href="src/IDNFT.sol/abstract.IDNFT.html">IDNFT</a></li><li class="chapter-item "><a href="src/Treasury.sol/contract.Treasury.html">Treasury</a></li><li class="chapter-item "><a href="src/interfaces/IIDNFT.sol/interface.IIDNFT.html">IIDNFT</a></li><li class="chapter-item "><a href="src/interfaces/ITreasury.sol/interface.ITreasury.html">ITreasury</a></li><li class="chapter-item "><a href="testing/TreasuryTestCoverage.html">Treasury Test Coverage</a></li><li class="chapter-item "><a href="testing/TreasuryTestScenarios.html">Treasury Test Scenarios</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/w3b3d3v/valocracy-contracts" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="valocracy"><a class="header" href="#valocracy">Valocracy</a></h1>
<p>Valocracy is a governance model designed to replace plutocracy with a system that allocates influence based on contributions and merit rather than wealth. The core concept is that participants earn influence (voting power) in proportion to the value they create for the community. Influence is non-transferable, ensuring that governance reflects active contribution rather than token accumulation.</p>
<h2 id="key-concepts"><a class="header" href="#key-concepts">Key Concepts</a></h2>
<ul>
<li><strong>Valuation over Capital</strong>: Voting power is tied to reputation or contribution scores, not tokens.</li>
<li><strong>Soulbound Rights</strong>: Influence is non-transferable and earned individually.</li>
<li><strong>Multi-Stakeholder Alignment</strong>: Designed to align the incentives of builders, users, and funders.</li>
<li><strong>Transparent Contribution Records</strong>: Contributions are logged and assessed by peers or through algorithms.</li>
<li><strong>Decentralized Reputation System</strong>: Participants build up their score through verifiable actions.</li>
</ul>
<h2 id="architecture-components"><a class="header" href="#architecture-components">Architecture Components</a></h2>
<h3 id="1-contributor-registry-soulbound-identity"><a class="header" href="#1-contributor-registry-soulbound-identity">1. Contributor Registry (Soulbound Identity)</a></h3>
<ul>
<li>Each participant has a non-transferable identity (e.g., NFT or soulbound token).</li>
<li>Used to track all contributions and voting rights.</li>
<li><input disabled="" type="checkbox"/>
Implement ERC20Votes as soulbound token and include NFT Metadata to be compatible with ERC721 Interface.</li>
<li><input disabled="" type="checkbox"/>
Function getVotes() should return the number of votes the holder has.</li>
</ul>
<h3 id="2-contribution-tracking-module"><a class="header" href="#2-contribution-tracking-module">2. Contribution Tracking Module</a></h3>
<ul>
<li><input disabled="" type="checkbox"/>
Discuss and define how the mint process will work. Ownable/AcessControl/Gov/Multisig.</li>
<li><input disabled="" type="checkbox"/>
Discuss the best way to track contributions. Considering the new changes to the ERC20Votes instead of cumulative NFTs.</li>
<li><input disabled="" type="checkbox"/>
Shares are minted to the contributor's wallet address when they submit a contribution and get verified or we mint and they can claim it?</li>
</ul>
<h3 id="3-valocracy-voting-system"><a class="header" href="#3-valocracy-voting-system">3. Valocracy Voting System</a></h3>
<ul>
<li>Voting weight = Curve calculation based on decay.</li>
</ul>
<h3 id="4-treasury-and-share-management"><a class="header" href="#4-treasury-and-share-management">4. Treasury and Share Management</a></h3>
<ul>
<li>Treasury manages the economic power of the system through shares.</li>
<li>Shares represent proportional ownership of the treasury's assets.</li>
<li>Treasury has one underlying asset.</li>
<li><input disabled="" type="checkbox"/>
Implement share price calculation mechanism</li>
<li><input disabled="" type="checkbox"/>
Create emergency pause functionality</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="idnft"><a class="header" href="#idnft">IDNFT</a></h1>
<p><a href="https://github.com/w3b3d3v/valocracy-contracts/blob/3c1bb3a5dbf1b0852bacbc7957066c674b876a74/src/IDNFT.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/IDNFT.sol//src/math/ERC7725.sol/abstract.ERC7725.html">ERC7725</a></p>
<p><strong>Author:</strong>
0xneves</p>
<p>This contract provides a gamefied system for tracking account's progress and their respectful energy eficiency.
Character progress is known as the account's <code>Level</code> and energy as their <code>Mana</code>. Addresses health bar is their reputation
record, it's immortal and will always live on the blockchain but the Level can fluctuate deppending on the amount of Mana.
Level can be used to quantify that user's ability to change the world around them but Mana controls how much efficient
that Level is. On a spectrum, full Mana symbolizes 100% of the user Level but 0% Mana resets the user Level to 0.
Game Rules:</p>
<ul>
<li>Implementors should decide how their users gain new levels</li>
<li>Mana is measured as unix timestamp and is considered full while: Mana + <a href="src/IDNFT.sol//src/IDNFT.sol/abstract.IDNFT.html#stableperiod">stablePeriod</a> &gt; block.timestamp</li>
<li>Mana is replenished every time the user Level increases.</li>
<li>Stable period and decreasing period resets to default every time the user Level increases.</li>
<li>Decreasing period always start counting after stable period ends.</li>
<li>Level lost by the lack of Mana cannot be replenished.</li>
</ul>
<p>*Implementers of IDNFT should configure the desired mechanics or override with their own. The standard version deliver
the Level value, that can be used for decision making in the ecosystem and Mana for downgrading the Level based on the
user activity.
Requirements:</p>
<ul>
<li>The contract requires stable period and the decreasing period to function but their values can be override.</li>
<li>The contract relies on ERC-7725 for exponential curve decay, but another logic can override the behaviour.*</li>
</ul>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="_accounts"><a class="header" href="#_accounts">_accounts</a></h3>
<p>Mapping from accounts addresses to their Level and Mana</p>
<pre><code class="language-solidity">mapping(address =&gt; Character) private _accounts;
</code></pre>
<h3 id="_curvature"><a class="header" href="#_curvature">_curvature</a></h3>
<p>Curvature of the resulting decay value</p>
<pre><code class="language-solidity">int16 private _curvature;
</code></pre>
<h3 id="_stableperiod"><a class="header" href="#_stableperiod">_stablePeriod</a></h3>
<p>Configuration of the active and inactive time of users</p>
<pre><code class="language-solidity">uint32 private _stablePeriod;
</code></pre>
<h3 id="_decreaseperiod"><a class="header" href="#_decreaseperiod">_decreasePeriod</a></h3>
<pre><code class="language-solidity">uint32 private _decreasePeriod;
</code></pre>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="curvature"><a class="header" href="#curvature">curvature</a></h3>
<p><em>The curvature for calculating the Level decay.</em></p>
<pre><code class="language-solidity">function curvature() public view virtual returns (int16);
</code></pre>
<h3 id="stableperiod"><a class="header" href="#stableperiod">stablePeriod</a></h3>
<p><em>Amount of time while the Mana is stable and won't be consumed.</em></p>
<pre><code class="language-solidity">function stablePeriod() public view virtual returns (uint32);
</code></pre>
<h3 id="decreaseperiod"><a class="header" href="#decreaseperiod">decreasePeriod</a></h3>
<p><em>Amount of time it takes from Mana stability until its full depletion.</em></p>
<pre><code class="language-solidity">function decreasePeriod() public view virtual returns (uint32);
</code></pre>
<h3 id="accountstats"><a class="header" href="#accountstats">accountStats</a></h3>
<p><em>Returns the raw <code>Character</code> settings of <code>account</code> with no adjustments.</em></p>
<pre><code class="language-solidity">function accountStats(address account) public view virtual returns (Character memory);
</code></pre>
<h3 id="levelof"><a class="header" href="#levelof">levelOf</a></h3>
<p><em>Returns the Level of a given <code>account</code> adjusted for his current Mana.</em></p>
<pre><code class="language-solidity">function levelOf(address account) public view virtual returns (uint256);
</code></pre>
<h3 id="_increaselevel"><a class="header" href="#_increaselevel">_increaseLevel</a></h3>
<p><em>Increases the current Level of <code>account</code> by <code>amount</code> and replenishes the Mana.</em></p>
<pre><code class="language-solidity">function _increaseLevel(address account, uint256 amount) internal virtual;
</code></pre>
<h3 id="_setcurvature"><a class="header" href="#_setcurvature">_setCurvature</a></h3>
<p><em>Set a new curvature</em></p>
<pre><code class="language-solidity">function _setCurvature(int16 curvature_) internal virtual;
</code></pre>
<h3 id="_setstableperiod"><a class="header" href="#_setstableperiod">_setStablePeriod</a></h3>
<p><em>Set a new stable period</em></p>
<pre><code class="language-solidity">function _setStablePeriod(uint32 stablePeriod_) internal virtual;
</code></pre>
<h3 id="_setdecreaseperiod"><a class="header" href="#_setdecreaseperiod">_setdecreasePeriod</a></h3>
<p><em>Set a new decreasing period</em></p>
<pre><code class="language-solidity">function _setdecreasePeriod(uint32 decreasePeriod_) internal virtual;
</code></pre>
<h3 id="__unsafe_setlevelandmana"><a class="header" href="#__unsafe_setlevelandmana">__unsafe_setLevelAndMana</a></h3>
<p><em>Unsafe write access to an account Character.
WARNING: Anyone calling this MUST ensure that the custom implementation matches the expected behaviour of the contract.</em></p>
<pre><code class="language-solidity">function __unsafe_setLevelAndMana(address account, uint256 amount, uint32 mana) internal;
</code></pre>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="character"><a class="header" href="#character">Character</a></h3>
<p>Character progress</p>
<pre><code class="language-solidity">struct Character {
    uint256 level;
    uint32 mana;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="treasury"><a class="header" href="#treasury">Treasury</a></h1>
<p><a href="https://github.com/w3b3d3v/valocracy-contracts/blob/3c1bb3a5dbf1b0852bacbc7957066c674b876a74/src/Treasury.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC20, <a href="src/Treasury.sol//src/interfaces/ITreasury.sol/interface.ITreasury.html">ITreasury</a></p>
<h2 id="state-variables-1"><a class="header" href="#state-variables-1">State Variables</a></h2>
<h3 id="_asset"><a class="header" href="#_asset">_asset</a></h3>
<p><em>The underlying token used for the Vault.</em></p>
<pre><code class="language-solidity">IERC20 private immutable _asset;
</code></pre>
<h3 id="_valocracy"><a class="header" href="#_valocracy">_valocracy</a></h3>
<p><em>The Valocracy contract.</em></p>
<pre><code class="language-solidity">address private _valocracy;
</code></pre>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<p><em>Initializes the contract by setting a <code>name</code> and a <code>symbol</code>
for the fungible token. Also sets the Valocracy contract and the
underlying asset token.</em></p>
<pre><code class="language-solidity">constructor(IERC20 asset_, address valocracy, string memory name, string memory symbol) ERC20(name, symbol);
</code></pre>
<h3 id="asset"><a class="header" href="#asset">asset</a></h3>
<p><em>See <a href="src/Treasury.sol//src/interfaces/ITreasury.sol/interface.ITreasury.html#asset">IERC4626-asset</a>.</em></p>
<pre><code class="language-solidity">function asset() public view virtual returns (address);
</code></pre>
<h3 id="totalassets"><a class="header" href="#totalassets">totalAssets</a></h3>
<p><em>See <a href="src/Treasury.sol//src/interfaces/ITreasury.sol/interface.ITreasury.html#totalassets">IERC4626-totalAssets</a>.</em></p>
<pre><code class="language-solidity">function totalAssets() public view virtual returns (uint256);
</code></pre>
<h3 id="previewwithdraw"><a class="header" href="#previewwithdraw">previewWithdraw</a></h3>
<p><em>See <a href="src/Treasury.sol//src/interfaces/ITreasury.sol/interface.ITreasury.html#previewwithdraw">IERC4626-previewWithdraw</a>.</em></p>
<p><em>Calculates the amount of assets that would be returned for burning the given amount of shares.
The calculation is based on the proportion of total assets to total shares.
For example, if there are 2000 assets and 1000 shares, each share represents 2 assets.</em></p>
<pre><code class="language-solidity">function previewWithdraw(uint256 shares) public view virtual returns (uint256);
</code></pre>
<h3 id="deposit"><a class="header" href="#deposit">deposit</a></h3>
<p><em>See <a href="src/Treasury.sol//src/interfaces/ITreasury.sol/interface.ITreasury.html#deposit">IERC4626-deposit</a>.</em></p>
<pre><code class="language-solidity">function deposit(address receiver, uint256 shares) public;
</code></pre>
<h3 id="withdraw"><a class="header" href="#withdraw">withdraw</a></h3>
<p><em>See <a href="src/Treasury.sol//src/interfaces/ITreasury.sol/interface.ITreasury.html#withdraw">IERC4626-withdraw</a>.</em></p>
<pre><code class="language-solidity">function withdraw(address receiver, uint256 shares) public;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iidnft"><a class="header" href="#iidnft">IIDNFT</a></h1>
<p><a href="https://github.com/w3b3d3v/valocracy-contracts/blob/3c1bb3a5dbf1b0852bacbc7957066c674b876a74/src/interfaces/IIDNFT.sol">Git Source</a></p>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="vacancyperiod"><a class="header" href="#vacancyperiod">vacancyPeriod</a></h3>
<p><em>Returns the vacancy period. Vacancy is measured in seconds because
its the same unit of time as block.timestamp.
The vacancy period is the time that an account has until its governance
power expires. It will be renewed after a new mint to the account.
IMPORTANT: After loosing the governance power, what was lost cannot be
recovered. The account will have to mint new NFTs to start over. Hence,
the importance of not letting the governance power expire.
WARNING: Changing the vacancy period affects the mana of all accounts.
Make sure to correctly calculate the desired vacancy period in SECONDS
and not in days, months or years. When making dynamic vacancy periods,
make sure to override the <code>_mana</code> function.</em></p>
<pre><code class="language-solidity">function vacancyPeriod() external view returns (uint256);
</code></pre>
<h3 id="valoridof"><a class="header" href="#valoridof">valorIdOf</a></h3>
<p><em>Returns the valor ID linked to the given token ID.</em></p>
<pre><code class="language-solidity">function valorIdOf(uint256 tokenId) external view returns (uint256);
</code></pre>
<h3 id="rarityof"><a class="header" href="#rarityof">rarityOf</a></h3>
<p><em>Returns the rarity of the given valor ID.</em></p>
<pre><code class="language-solidity">function rarityOf(uint256 valorId) external view returns (uint256);
</code></pre>
<h3 id="metadataof"><a class="header" href="#metadataof">metadataOf</a></h3>
<p><em>Returns the metadata of the given valor ID.</em></p>
<pre><code class="language-solidity">function metadataOf(uint256 valorId) external view returns (string memory);
</code></pre>
<h3 id="levelof-1"><a class="header" href="#levelof-1">levelOf</a></h3>
<p><em>Returns the level of governance power of a given account.</em></p>
<pre><code class="language-solidity">function levelOf(address account) external view returns (uint256);
</code></pre>
<h3 id="expiryof"><a class="header" href="#expiryof">expiryOf</a></h3>
<p><em>Expiration of the account. The governance power decays after the
vacancy period has passed. See {IValocracy-vacancyPeriod}.</em></p>
<pre><code class="language-solidity">function expiryOf(address account) external view returns (uint256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="itreasury"><a class="header" href="#itreasury">ITreasury</a></h1>
<p><a href="https://github.com/w3b3d3v/valocracy-contracts/blob/3c1bb3a5dbf1b0852bacbc7957066c674b876a74/src/interfaces/ITreasury.sol">Git Source</a></p>
<h2 id="functions-3"><a class="header" href="#functions-3">Functions</a></h2>
<h3 id="asset-1"><a class="header" href="#asset-1">asset</a></h3>
<p><em>Returns the address of the underlying token used for the Vault
for accounting, depositing, and withdrawing.</em></p>
<pre><code class="language-solidity">function asset() external view returns (address assetTokenAddress);
</code></pre>
<h3 id="totalassets-1"><a class="header" href="#totalassets-1">totalAssets</a></h3>
<p><em>Returns the total amount of the underlying asset that is “managed”
by Vault.</em></p>
<pre><code class="language-solidity">function totalAssets() external view returns (uint256 totalManagedAssets);
</code></pre>
<h3 id="previewwithdraw-1"><a class="header" href="#previewwithdraw-1">previewWithdraw</a></h3>
<p><em>Returns the amount of the underlying asset that would be returned
from withdrawing the given amount of shares.</em></p>
<pre><code class="language-solidity">function previewWithdraw(uint256 shares) external view returns (uint256 assets);
</code></pre>
<h3 id="deposit-1"><a class="header" href="#deposit-1">deposit</a></h3>
<p><em>Deposits the given amount of shares into the Vault.</em></p>
<pre><code class="language-solidity">function deposit(address receiver, uint256 shares) external;
</code></pre>
<h3 id="withdraw-1"><a class="header" href="#withdraw-1">withdraw</a></h3>
<p><em>Withdraws the given amount of shares from the Vault.</em></p>
<pre><code class="language-solidity">function withdraw(address receiver, uint256 shares) external;
</code></pre>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="deposit-2"><a class="header" href="#deposit-2">Deposit</a></h3>
<p><em>Emitted when a new deposit of shares is made.</em></p>
<pre><code class="language-solidity">event Deposit(address indexed receiver, uint256 shares);
</code></pre>
<h3 id="withdraw-2"><a class="header" href="#withdraw-2">Withdraw</a></h3>
<p><em>Emitted when a withdrawal of shares is made.</em></p>
<pre><code class="language-solidity">event Withdraw(address indexed owner, address indexed receiver, uint256 assets, uint256 shares);
</code></pre>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<h3 id="notauthorized"><a class="header" href="#notauthorized">NotAuthorized</a></h3>
<p><em>Emitted when a non-authorized account attempts to call a function.</em></p>
<pre><code class="language-solidity">error NotAuthorized(address caller);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="treasury-test-coverage"><a class="header" href="#treasury-test-coverage">Treasury Test Coverage</a></h1>
<p>What Has Been Tested:</p>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
Basic economic functionalities</li>
</ul>
<h2 id="economic-functionalities"><a class="header" href="#economic-functionalities">ECONOMIC FUNCTIONALITIES</a></h2>
<h3 id="1-basic-contract-setup-"><a class="header" href="#1-basic-contract-setup-">1. Basic Contract Setup ✅</a></h3>
<ul>
<li>Contract deployment with correct parameters</li>
<li>Token name and symbol verification</li>
<li>Asset and valocracy address assignment</li>
</ul>
<h3 id="2-asset-management-"><a class="header" href="#2-asset-management-">2. Asset Management ✅</a></h3>
<ul>
<li>Total assets calculation</li>
<li>Share-to-asset conversion</li>
<li>Asset balance tracking</li>
<li>Asset transfers</li>
</ul>
<h3 id="3-share-operations-"><a class="header" href="#3-share-operations-">3. Share Operations ✅</a></h3>
<ul>
<li>Share minting (only by authorized address)</li>
<li>Share burning</li>
<li>Share distribution</li>
<li>Share calculations</li>
</ul>
<h3 id="4-access-control-"><a class="header" href="#4-access-control-">4. Access Control ✅</a></h3>
<ul>
<li>Authorization checks for deposits</li>
<li>Unauthorized access prevention</li>
<li>Withdrawal permissions</li>
</ul>
<h3 id="5-events-"><a class="header" href="#5-events-">5. Events ✅</a></h3>
<ul>
<li>Deposit event emission</li>
<li>Withdraw event emission</li>
<li>Event parameter verification</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="additional-test-scenarios"><a class="header" href="#additional-test-scenarios">Additional Test Scenarios</a></h2>
<ol>
<li>
<p><strong>Asset Ratio Tests</strong></p>
<ul>
<li><input disabled="" type="checkbox"/>
Test share-to-asset ratio consistency</li>
<li><input disabled="" type="checkbox"/>
Verify ratio calculations after multiple deposits</li>
<li><input disabled="" type="checkbox"/>
Check ratio accuracy after withdrawals</li>
<li><input disabled="" type="checkbox"/>
Validate ratio maintenance during external transfers</li>
</ul>
</li>
<li>
<p><strong>Edge Cases</strong></p>
<ul>
<li><input disabled="" type="checkbox"/>
Test with maximum uint256 values</li>
<li><input disabled="" type="checkbox"/>
Verify behavior with zero amount deposits</li>
<li><input disabled="" type="checkbox"/>
Check handling of dust amounts</li>
<li><input disabled="" type="checkbox"/>
Test with different decimal places in asset token</li>
</ul>
</li>
<li>
<p><strong>Multiple User Scenarios</strong></p>
<ul>
<li><input disabled="" type="checkbox"/>
Test concurrent deposits from multiple users</li>
<li><input disabled="" type="checkbox"/>
Verify share distribution accuracy</li>
<li><input disabled="" type="checkbox"/>
Check withdrawal queue handling</li>
<li><input disabled="" type="checkbox"/>
Test multiple simultaneous withdrawals</li>
</ul>
</li>
<li>
<p><strong>Asset Price Impact</strong></p>
<ul>
<li><input disabled="" type="checkbox"/>
Test share price calculation accuracy</li>
<li><input disabled="" type="checkbox"/>
Verify price impact from large deposits</li>
<li><input disabled="" type="checkbox"/>
Check price stability during withdrawals</li>
<li><input disabled="" type="checkbox"/>
Validate price calculations with varying asset amounts</li>
</ul>
</li>
<li>
<p><strong>Security Tests</strong></p>
<ul>
<li><input disabled="" type="checkbox"/>
Test reentrancy protection</li>
<li><input disabled="" type="checkbox"/>
Verify access control boundaries</li>
<li><input disabled="" type="checkbox"/>
Check overflow/underflow protection</li>
<li><input disabled="" type="checkbox"/>
Validate emergency pause functionality</li>
</ul>
</li>
<li>
<p><strong>Fee Management Tests</strong></p>
<ul>
<li><input disabled="" type="checkbox"/>
Test fee calculation accuracy</li>
<li><input disabled="" type="checkbox"/>
Verify fee collection mechanisms</li>
<li><input disabled="" type="checkbox"/>
Check fee distribution to stakeholders</li>
<li><input disabled="" type="checkbox"/>
Validate fee adjustments and updates</li>
<li><input disabled="" type="checkbox"/>
Test different fee types and their interactions</li>
</ul>
</li>
<li>
<p><strong>Asset Strategy Tests</strong></p>
<ul>
<li><input disabled="" type="checkbox"/>
Test different asset allocation strategies</li>
<li><input disabled="" type="checkbox"/>
Verify strategy execution and performance</li>
<li><input disabled="" type="checkbox"/>
Check strategy rebalancing mechanisms</li>
<li><input disabled="" type="checkbox"/>
Validate strategy risk management</li>
<li><input disabled="" type="checkbox"/>
Test strategy adaptation to market conditions</li>
</ul>
</li>
<li>
<p><strong>Treasury Manager Tests</strong></p>
<ul>
<li><input disabled="" type="checkbox"/>
Test manager permission boundaries</li>
<li><input disabled="" type="checkbox"/>
Verify manager action validations</li>
<li><input disabled="" type="checkbox"/>
Check manager role limitations</li>
<li><input disabled="" type="checkbox"/>
Validate manager decision execution</li>
<li><input disabled="" type="checkbox"/>
Test manager accountability mechanisms</li>
</ul>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>

    </div>
    </body>
</html>
